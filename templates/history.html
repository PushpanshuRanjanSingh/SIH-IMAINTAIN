{%load static%}
<!DOCTYPE html>
<html>

		{%block title%}iMaintain | Engineer History{%endblock%}
		{%include 'Eheader.html' %}
 	<link rel="stylesheet" type="text/css" href="{% static 'css/table.css' %}">

<body class="w3-theme-l5">

		<div class="w3-top">
			<div class="w3-bar w3-theme-d2 w3-left-align w3-large w3-padding">
				<div class="row w3-col s12">
					<div class="w3-col s2 ">
						<a href="{{request.META.HTTP_REFERER}}">
							<i class="fa fa-arrow-left"></i>
						</a>
					</div>
					<div class="w3-col s8 w3-center">
						Past Service History
					</div>
				</div>	
			</div>
		</div>

		<br><br>
		<input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for names.." title="Type in a name">
		<div class="container" style="overflow-x:auto;">

			<table id="myTable">
			  <tr class="header">
			    <th class="tableWidth">Name</th>
			    <th class="tableWidth">Engineer ID</th>
			    <th class="tableWidth">Service Date</th>
			    <th class="tableWidth">Download Report</th>
			  </tr>
			  {%for service in services%}
				  <tr>
				    <td>{{service.username}}</td>
				    <td>{{service.user_id }}</td>
				    <td>{{service.service_date}}</td>
				    <td><a href="/downloadsinglereport/{{service.id}}"><button class="w3-button w3-section w3-teal w3-ripple w3-round-xxlarge no-outline">Download</button></a></td>
				  </tr>
				{%endfor%}
			</table>
		</div>	
	
	</div>
	
	{%include 'EFooter.html'%}
	<script>
		$(document).ready(function() {
			$('#example').DataTable({
				"scrollY": "200px",
				"scrollCollapse": true,
			});
		} );

		function myFunction() {
		  var input, filter, table, tr, td, i, txtValue;
		  input = document.getElementById("myInput");
		  filter = input.value.toUpperCase();
		  table = document.getElementById("myTable");
		  tr = table.getElementsByTagName("tr");
		  for (i = 0; i < tr.length; i++) {
		    td = tr[i].getElementsByTagName("td")[0];
		    if (td) {
		      txtValue = td.textContent || td.innerText;
		      if (txtValue.toUpperCase().indexOf(filter) > -1) {
		        tr[i].style.display = "";
		      } else {
		        tr[i].style.display = "none";
		      }
		    }       
		  }
		}
	</script>	

</body>
</html> 
